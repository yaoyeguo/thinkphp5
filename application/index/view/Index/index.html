<div class="header">
    <h1 class="page-header">
        菜单管理
    </h1>
    <ol class="breadcrumb">
        <li><a href="#">系统信息</a></li>
        <li class="active">菜单管理</li>
    </ol>
</div>

<div id="page-inner">
    <div class="row">
        <div class="col-md-12">
            <button class="btn" type="button" id="addMenu">添加</button>
        </div>
    </div>

    <div class="row">
        <div class="col-md-12">
            <div class="card-content">
                <div class="table-responsive">
                    <table class="table table-striped table-bordered table-hover" id="dataTables-example">
                        <thead>
                            <tr>
                                <th>菜单ID</th>
                                <th>菜单名称</th>
                                <th>菜单连接</th>
                                <th>排序</th>
                                <th>编辑</th>
                            </tr>
                        </thead>

                        <tbody>
                            {foreach name="tree" item="item" key="key"}
                                <tr class="odd gradeX">
                                    <td>{$item.id}</td>
                                    <td>{$item.name}</td>
                                    <td>{$item.mca}</td>
                                    <td>{$item.order_number}</td>
                                    <td>&nbsp;<a href="index/update?id={$item.id}" class="updateMenu">编辑</a>&nbsp;|&nbsp;<a href="#" class="deleteMenu" data-id="{$item.id}">删除&nbsp;</a></td>
                                </tr>
                            {/foreach}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>
<script>

    $('#addMenu').on('click',function(){
        window.location.href = 'index/add';
    });

    $('.deleteMenu').on('click',function(){
        var id = $(this).attr('data-id');
        $.ajax({
            url: requestUrl + "index/index/deleteMenu",
            data:{'id':id,},
            type:"Post",
            dataType:"json",
            success:function(data){
                layer.msg(data.msg,{icon: 1});
                window.location.reload();
            },
            error:function(data){
                layer.msg(data.msg,{icon: 1});
            }
        });
    });


</script>

